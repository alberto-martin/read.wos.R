{
    "contents" : "\nlibrary(data.table)\n\nsetwd(\"F:/Dropbox/Proyectos/co-author index/wos\")\n\n# reads old data (December 2013) and new\nwos_old  <- fread(\"spain_old_naut.csv\")\nwos_2013 <- read.wos.tw8(filefolder=\"./2013/spain2013\")\n\n# deletes useless columns and rows\nwos_old[,TC:=NULL]\nwos_old[,Z9:=NULL]\nwos_old <- wos_old[PY != 2013]\n\n# subsets new data to get only necessary columns\nsub_wos_2013 <- wos_2013[,c(59,56,10,43,6), with=FALSE]\n\n# splits category and author data\nwc_split <- split.field(sub_wos_2013$UT, sub_wos_2013$WC, \";\")\naf_split <- split.field(sub_wos_2013$UT, sub_wos_2013$AF, \";\")\n\n# merges new data with category data\nsetkey(sub_wos_2013,UT)\nsub_wos_2013 <- sub_wos_2013[wc_split]\nsub_wos_2013[,WC:=NULL]\nsetnames(sub_wos_2013,\"split\",\"WC\")\n\n# computes nº of authors per article\n# and merges with sub_wos_2013\naut_per_art <- af_split[,length(split),by=UT]\nsetkey(aut_per_art,UT)\naut_per_art <- aut_per_art[sub_wos_2013]\nsetnames(aut_per_art,\"V1\",\"naut\")\naut_per_art[,AF:=NULL]\nsetcolorder(aut_per_art,c(\"UT\",\"WC\",\"SO\",\"PY\",\"naut\"))\naut_per_art$PY  <- as.numeric(aut_per_art$PY)\n\n# merges old and new data\nsetkey(wos_old, UT)\nsetkey(aut_per_art, UT)\nwos_spain <- rbind(wos_old,aut_per_art)\n\nmode <- function(x) {\n  ux <- unique(x)\n  ux[which.max(tabulate(match(x, ux)))]\n}\n\n# calculates mode, maximum, median, and minimum\n# for nº of authors per article, grouping by subject categories\n\n# mode\nmode_subj_wos <- wos_spain[, mode(naut),by=list(WC,PY)]\nsetnames(mode_subj_wos,\"V1\",\"mode\")\nsubj_acc <- mode_subj_wos\nsetkey(subj_acc, WC, PY)\n\n# maximum\nmax_subj_wos <- wos_spain[, max(naut),by=list(WC,PY)]\nsetnames(max_subj_wos,\"V1\",\"max\")\nsubj_acc <- subj_acc[max_subj_wos]\nsetkey(subj_acc, WC, PY)\n\n# median\nmed_subj_wos <- wos_spain[, median(as.numeric(naut)),by=list(WC,PY)]\nsetnames(med_subj_wos,\"V1\",\"median\")\nsubj_acc <- subj_acc[med_subj_wos]\nsetkey(subj_acc, WC, PY)\n\n# minimum\nmin_subj_wos <- wos_spain[, min(naut),by=list(WC,PY)]\nsetnames(min_subj_wos,\"V1\",\"min\")\nsubj_acc <- subj_acc[min_subj_wos]\nsetkey(subj_acc, WC, PY)\n\n# n: nº of articles by category, year\nn_subj_wos <- wos_spain[, length(naut),by=list(WC,PY)]\nsetnames(n_subj_wos,\"V1\",\"n\")\nsubj_acc <- subj_acc[n_subj_wos]\nsetkey(subj_acc, WC, PY)\n\nsubj_acc <- subj_acc[order(subj_acc$WC,subj_acc$PY)]\n\n\n\n# calculates mode, maximum, median, and minimum\n# for nº of authors per article, grouping by journals\n\n# mode\nmode_jour_wos <- wos_spain[, mode(naut),by=list(SO,PY)]\nsetnames(mode_jour_wos,\"V1\",\"mode\")\njour_acc <- mode_jour_wos\nsetkey(jour_acc, SO, PY)\n\n# maximum\nmax_jour_wos <- wos_spain[, max(naut),by=list(SO,PY)]\nsetnames(max_jour_wos,\"V1\",\"max\")\njour_acc <- jour_acc[max_jour_wos]\nsetkey(jour_acc, SO, PY)\n\n# median\nmed_jour_wos <- wos_spain[, median(as.numeric(naut)),by=list(SO,PY)]\nsetnames(med_jour_wos,\"V1\",\"median\")\njour_acc <- jour_acc[med_jour_wos]\nsetkey(jour_acc, SO, PY)\n\n# minimum\nmin_jour_wos <- wos_spain[, min(naut),by=list(SO,PY)]\nsetnames(min_jour_wos,\"V1\",\"min\")\njour_acc <- jour_acc[min_jour_wos]\nsetkey(jour_acc, SO, PY)\n\n# n: nº of articles by category, year\nn_jour_wos <- wos_spain[, length(naut),by=list(SO,PY)]\nsetnames(n_jour_wos,\"V1\",\"n\")\njour_acc <- jour_acc[n_jour_wos]\nsetkey(jour_acc, SO, PY)\n\njour_acc <- jour_acc[order(jour_acc$SO,jour_acc$PY)]\n\n\nwrite.csv(subj_acc,\"wos_subj_acc.csv\")\nwrite.csv(jour_acc,\"wos_jour_acc.csv\")",
    "created" : 1417724175280.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2313434774",
    "id" : "CA42EB4D",
    "lastKnownWriteTime" : 1417735096,
    "path" : "F:/Dropbox/Proyectos/read.wos.R/analysis_wos.R",
    "project_path" : "analysis_wos.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : false,
    "type" : "r_source"
}